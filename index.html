<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/notebook32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/notebook16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|SimHei:300,300italic,400,400italic,700,700italic|Microsoft Yahei:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"williamwyl.cn","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"valine","storage":true,"lazyload":false,"nav":{"valine":{"order":-1}},"activeClass":"valine"},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="生活可以随心所欲，但不能随波逐流">
<meta property="og:type" content="website">
<meta property="og:title" content="WYL&#39;s Homepage">
<meta property="og:url" content="https://williamwyl.cn/index.html">
<meta property="og:site_name" content="WYL&#39;s Homepage">
<meta property="og:description" content="生活可以随心所欲，但不能随波逐流">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Wang Yilin">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://williamwyl.cn/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>WYL's Homepage</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">WYL's Homepage</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2030/01/01/0%E7%BD%AE%E9%A1%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2030/01/01/0%E7%BD%AE%E9%A1%B6/" class="post-title-link" itemprop="url">置顶</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2030-01-01 00:00:00" itemprop="dateCreated datePublished" datetime="2030-01-01T00:00:00+08:00">2030-01-01</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-12-26 10:43:11" itemprop="dateModified" datetime="2024-12-26T10:43:11+08:00">2024-12-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">杂谈</span></a>
                </span>
            </span>

          
            <span id="/2030/01/01/0%E7%BD%AE%E9%A1%B6/" class="post-meta-item leancloud_visitors" data-flag-title="置顶" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>83</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p align="center">
点击左侧的<a href="https://williamwyl.cn/archives">归档</a>可以看到我的博客的目录！
</p>
<p align="center">
Click  <a href="https://williamwyl.cn/archives">归档</a> to see the table of content of my blogs!
</p>
<p align="center">
遗憾的是，我目前嵌入的评论区并不能正常工作，等我有时间再搞一下......
</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2024/12/26/PASRML/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/26/PASRML/" class="post-title-link" itemprop="url">基于机器学习的行星大气光谱反演</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-12-26 10:23:29 / 修改时间：10:41:00" itemprop="dateCreated datePublished" datetime="2024-12-26T10:23:29+08:00">2024-12-26</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%89%A9%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">物理</span></a>
                </span>
            </span>

          
            <span id="/2024/12/26/PASRML/" class="post-meta-item leancloud_visitors" data-flag-title="基于机器学习的行星大气光谱反演" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>104</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>断断续续一周时间搓出来的地球流体的数值模拟与AI预测课程大作业，先放一个文件链接在这里以便下载查看，考完期末再来补充项目的具体实现过程。</p>
<ul>
<li>Slides <ul>
<li>PDF：<a href="https://williamwyl.cn/pdf/PASRML/%E7%8E%8B%E8%89%BA%E9%9C%96_%E5%9F%BA%E4%BA%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%A1%8C%E6%98%9F%E5%A4%A7%E6%B0%94%E5%85%89%E8%B0%B1%E5%8F%8D%E6%BC%94.pdf">基于机器学习的行星大气光谱反演.pdf</a></li>
<li>PPT：<a href="https://williamwyl.cn/pdf/PASRML/%E7%8E%8B%E8%89%BA%E9%9C%96_%E5%9F%BA%E4%BA%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%9A%84%E8%A1%8C%E6%98%9F%E5%A4%A7%E6%B0%94%E5%85%89%E8%B0%B1%E5%8F%8D%E6%BC%94.pptx">基于机器学习的行星大气光谱反演.pptx</a></li>
</ul>
</li>
<li>Source code<ul>
<li>PKU disk：<a target="_blank" rel="noopener" href="https://disk.pku.edu.cn/link/AAB415CEB0F9BA4441A19C447067E4E5BF">PASRML_source_code.zip</a></li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2024/12/22/MITgcm/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/22/MITgcm/" class="post-title-link" itemprop="url">MITgcm入门指南</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-12-22 11:26:15 / 修改时间：16:12:59" itemprop="dateCreated datePublished" datetime="2024-12-22T11:26:15+08:00">2024-12-22</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%89%A9%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">物理</span></a>
                </span>
            </span>

          
            <span id="/2024/12/22/MITgcm/" class="post-meta-item leancloud_visitors" data-flag-title="MITgcm入门指南" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.8k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>9 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h3 id="1-MITgcm模式介绍"><a href="#1-MITgcm模式介绍" class="headerlink" title="1. MITgcm模式介绍"></a>1. MITgcm模式介绍</h3><p>MITgcm是一个用于研究大气、海洋与气候的数值模式，它是一个基于有限体积法的非静力平衡模式。MITgcm巧妙地通过流体动力学方程的同构，使得其动力内核既可以进行大气运动的模拟，也可以进行海洋流动的模拟。</p>
<div style="width:60%;margin:auto"><img src="/2024/12/22/MITgcm/isomorphism.png" class=""></div>

<center>
<font color="#A9A9A9">图1  海洋与大气运动的 z-p 同构</font>
</center>

<p>如果对MITgcm模式的方程和数值算法感兴趣，可以参考MITgcm的<a target="_blank" rel="noopener" href="https://mitgcm.readthedocs.io/">官方文档</a>，里面对于模式的kernel、参数化方案等有较为详细的介绍。</p>
<h3 id="2-安装与编译"><a href="#2-安装与编译" class="headerlink" title="2. 安装与编译"></a>2. 安装与编译</h3><p>首先我们需要获取MITgcm的代码，可以通过git进行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/MITgcm/MITgcm.git</span><br></pre></td></tr></table></figure>

<p>如果git不可用，也可以直接访问MITgcm的github页面手动下载解压。</p>
<p>下载之后，cd进入MITgcm的根目录，应该包含以下内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">model  #包含主程序源码</span><br><span class="line">eesupp #包含运行环境的源码</span><br><span class="line">pkg    #包含各package的源码</span><br><span class="line">doc    #包含rst格式的MITgcm文档</span><br><span class="line">tools  #包含各种有用的工具，比如genmake2，用于生成makefile的bash脚本</span><br><span class="line">utils  #包含各种功能，比如与matlab和python的间交互，utils/scripts包含将不同处理器或pile的输出文件合并的csh脚本</span><br><span class="line">verification #包含样例实验</span><br><span class="line">jobs #包含样例任务脚本</span><br><span class="line">lsopt #Line search优化代码</span><br><span class="line">optim #MITgcm和line search代码的接口</span><br></pre></td></tr></table></figure>

<p>接下来我们需要选定一个想要进行的实验，编译将在此基础上进行。所有的样例实验都存放在<code>verification</code>目录下，本文将以<code>tutorial_baroclinic_gyre</code>为例进行演示，进行其他实验的步骤类似。我们首先进入目标实验的编译目录：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd verification/tutorial_baroclinic_gyre/build</span><br></pre></td></tr></table></figure>

<p>接着，需要生成Makefile：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">../../../tools/genmake2 -mods ../code -optfile ../../../tools/build_options/linux_amd64_gfortran</span><br></pre></td></tr></table></figure>

<p>其中<code>-mods</code>命令告诉genmake使用<code>../code</code>中的内容覆盖模型默认的源码，包括<code>SIZE.h</code>（配置模式的区域大小，后面介绍）；<code>-optfile</code>命令告诉genmake在执行期间运行指定的optfile，这是一个bash脚本，包含环境变量、路径、编译器选项等，MITgcm提供了非常多预置的optfile，位于<code>tools/build_options</code>目录下，可以根据自己的机器进行选择。</p>
<p>生成Makefile之后，我们通过以下命令创建依赖关系：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make depend</span><br></pre></td></tr></table></figure>

<p>最后，可以使用以下命令编译代码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make</span><br></pre></td></tr></table></figure>

<p>如果成功编译，会生成一个名为<code>mitgcmuv</code>的可执行文件，因为编译后<code>build</code>目录内文件较多，可以使用<code>stat mitgcmuv</code>来方便地检查编译是否成功进行。</p>
<h3 id="3-实例演示：以tutorial-baroclinic-gyre为例"><a href="#3-实例演示：以tutorial-baroclinic-gyre为例" class="headerlink" title="3. 实例演示：以tutorial_baroclinic_gyre为例"></a>3. 实例演示：以<code>tutorial_baroclinic_gyre</code>为例</h3><h4 id="3-1-试运行"><a href="#3-1-试运行" class="headerlink" title="3.1 试运行"></a>3.1 试运行</h4><p>我们从MITgcm的根目录进入运行目录：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd run</span><br></pre></td></tr></table></figure>

<p>目前这是一个空目录，我们需要将可执行文件和输入文件放置进来：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp ../build/mitgcmuv .</span><br><span class="line">cp ../input/* .</span><br></pre></td></tr></table></figure>

<p>这样，我们就做好了运行前的全部准备，可以直接运行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mitgcmuv</span><br></pre></td></tr></table></figure>

<p>样例实验通常默认了非常少的时间步数，运行后立刻可以得到结果，可以将输出与<code>../results/output.txt</code>进行对比，如果结果相同，则说明程序执行正常，我们接着可以开始对实验参数进行更具体的配置。</p>
<div style="width:60%;margin:auto"><img src="/2024/12/22/MITgcm/baroclinic_ocean_gyre.png" class=""></div>

<center>
<font color="#A9A9A9">图2  baroclinic ocean gyre</font>
</center>

<p>本文运行的实验是Baroclinic Ocean Gyre，模拟风和浮力强迫下的斜压双涡漩海洋环流，位于<code>verification/tutorial_baroclinic_gyre</code>目录下。本实验使用球坐标网格并设有15个垂直层，横跨热带到中纬度，并受到恒定的东西风应力强迫，并且风应力的强度在南北方向上成正弦变化。</p>
<h4 id="3-2-编译配置（Compile-time-Configuration）"><a href="#3-2-编译配置（Compile-time-Configuration）" class="headerlink" title="3.2 编译配置（Compile-time Configuration）"></a>3.2 编译配置（Compile-time Configuration）</h4><p>接下来我们对实验中的参数进行配置，配置分为两部分：编译配置和运行配置，编译配置需要在编译前进行，每次修改之后都需要重新编译，而运行配置则不需要。</p>
<h5 id="3-2-1-code-packages-conf"><a href="#3-2-1-code-packages-conf" class="headerlink" title="3.2.1 code/packages.conf"></a>3.2.1 <code>code/packages.conf</code></h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">packages.conf文件应该包含以下内容：</span></span><br><span class="line">gfd</span><br><span class="line">diagnostics</span><br><span class="line">mnc</span><br></pre></td></tr></table></figure>

<p>在这个文件中我们指定了我们希望包含的库。<code>gfd</code>是一个预定义的库组，包含了大多数设置所需要的标准库。<code>mnc</code>库用于将输出以netCDF格式存储；<code>diagnostics</code>库允许用户从用于模型诊断的众多变量中选择输出，并指定输出频率，提供多种时间平均和快照选项，如果没有启用这个库，输出将局限于少量的快照。</p>
<h5 id="3-2-2-code-SIZE-h"><a href="#3-2-2-code-SIZE-h" class="headerlink" title="3.2.2 code/SIZE.h"></a>3.2.2 <code>code/SIZE.h</code></h5><p>这个文件指定了模型的几何。以下代码计算了整个模型域的水平大小：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&amp;           Nx  = sNx*nSx*nPx,</span><br><span class="line">&amp;           Ny  = sNy*nSy*nPy,</span><br></pre></td></tr></table></figure>

<p>整个模型域的大小是$62\times 62$，我们在这里将模型在水平方向上划分成四个区块，每个区块的大小为$31\times 31$，也就是</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&amp;           sNx =  31,</span><br><span class="line">&amp;           sNy =  31,</span><br><span class="line"></span><br><span class="line">&amp;           nSx =   2,</span><br><span class="line">&amp;           nSy =   2,</span><br></pre></td></tr></table></figure>

<p>为了正确地处理边界条件，模型的区块需要具有一定的重叠区域（overlap），MITgcm许可的最小的overlap是2，对于更加复杂的对流方案或参数化方案可能需要更大的overlap，我们在这里保持2即可：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&amp;           OLx =   2,</span><br><span class="line">&amp;           OLy =   2,</span><br></pre></td></tr></table></figure>

<p>以下代码设置了<code>nPx</code>和<code>nPy</code>，分别表示在$x$和$y$方向上使用的进程数量，我们暂时使用单进程，因此这两个参数设置为1：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&amp;           nPx =   1,</span><br><span class="line">&amp;           nPy =   1,</span><br></pre></td></tr></table></figure>

<p>最后，我们指定模型具有15个垂直层：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&amp;           Nr  =   15)</span><br></pre></td></tr></table></figure>

<p>修改完上述参数后，别忘记重新编译。</p>
<h4 id="3-3-运行配置（Run-time-Configuration）"><a href="#3-3-运行配置（Run-time-Configuration）" class="headerlink" title="3.3 运行配置（Run-time Configuration）"></a>3.3 运行配置（Run-time Configuration）</h4><p><code>input/data</code>文件里包含了模型的大部分参数，可以根据自己的需要进行修改。</p>
<p>第一部分主要是物理参数设置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Model parameters</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Continuous equation parameters</span></span><br><span class="line"> &amp;PARM01</span><br><span class="line"> viscAh=5000.,  #水平粘度系数</span><br><span class="line"> viscAr=1.E-2,  #竖直粘度系数</span><br><span class="line"> no_slip_sides=.TRUE.,  #侧边界无滑移边界条件</span><br><span class="line"> no_slip_bottom=.FALSE.,  #底部无滑移边界条件</span><br><span class="line"> diffKhT=1000.,  #水平温度扩散系数</span><br><span class="line"> diffKrT=1.E-5,  #竖直温度扩散系数</span><br><span class="line"><span class="meta prompt_"> #</span><span class="language-bash">静力不稳定混合参数化</span></span><br><span class="line"> ivdc_kappa=1.,</span><br><span class="line"> implicitDiffusion=.TRUE.,</span><br><span class="line"> eosType=&#x27;LINEAR&#x27;,  #使用线性状态方程</span><br><span class="line"> tRef=30.,27.,24.,21.,18.,15.,13.,11.,9.,7.,6.,5.,4.,3.,2.,  #参考温度</span><br><span class="line"> tAlpha=2.E-4,  #热膨胀系数</span><br><span class="line"> sBeta=0.,  #盐度收缩系数</span><br><span class="line"> rhoNil=999.8,  #表面参考密度</span><br><span class="line"> gravity=9.81,  #重力加速度</span><br><span class="line"><span class="meta prompt_"> # </span><span class="language-bash">自由表面公式</span></span><br><span class="line"> rigidLid=.FALSE.,</span><br><span class="line"> implicitFreeSurface=.TRUE.,</span><br><span class="line"> exactConserv=.TRUE.,</span><br><span class="line"> saltStepping=.FALSE.,  #盐度时间积分</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">globalFiles=.TRUE.,</span></span><br><span class="line"> &amp;</span><br></pre></td></tr></table></figure>

<p>另一部分比较重要的是对时间参数的设置：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">startTime=0.,  #开始时间</span><br><span class="line">endTime=12000.,  #结束时间</span><br><span class="line">deltaT=1200.,  #时间步长</span><br><span class="line">pChkptFreq=622080000.,  #检查点文件保存频率</span><br><span class="line">chkptFreq=155520000.,  #检查点文件保存频率</span><br><span class="line">dumpFreq=31104000.,  #快照输出频率</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">监视器输出选项</span></span><br><span class="line">monitorFreq=1200.,</span><br><span class="line">monitorSelect=2,</span><br></pre></td></tr></table></figure>

<p><code>input/bathy.bin</code>和<code>input/windx_cosy.bin</code>文件称分别指定了海底的地形以及风应力，这两个文件可以通过<code>input/gendata.m</code>或<code>input/gendata.py</code>生成。</p>
<p>完成对所有参数的的修改之后，就可以正式进行模式的运行了，可以将程序提交后台，并将日志输出到文件中：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./mitgcmuv &gt; output.log &amp;</span><br></pre></td></tr></table></figure>

<h4 id="3-4-输出格式"><a href="#3-4-输出格式" class="headerlink" title="3.4 输出格式"></a>3.4 输出格式</h4><p>程序运行结束之后，可以查看日志文件的末尾，如果显示</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PROGRAM MAIN: Execution ended Normally</span><br></pre></td></tr></table></figure>

<p>则说明程序顺利完成。此时<code>run</code>目录下会有很多<code>pickup.*</code>文件，这些文件可以用来restart，也就是从某个时间点开始运行，这样即使我们的程序中途退出了，我们也不需要再次从$t&#x3D;0$开始运行。</p>
<p>由于我们开启了mnc功能，我们可以获得netCDF格式的输出文件，这些文件被存放在<code>run/mnc_test_[iter]</code>子目录下，iter从0001开始，每次重新运行程序都会递增1。</p>
<p>由于我们在运行的时候将模型分为了4个区块，因此数据也是分4个区块存储的，MITgcm提供了便捷的工具将结果合并为完整的netCDF文件，我们可以在运行目录<code>run</code>下执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">% </span><span class="language-bash"><span class="built_in">ln</span> -s ../../../utils/python/MITgcmutils/scripts/gluemncbig .</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">./gluemncbig -o grid.nc mnc_test_*/grid.t*.nc</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">./gluemncbig -o state.nc mnc_test_*/state*.t*.nc</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">./gluemncbig -o dynDiag.nc mnc_test_*/dynDiag*.t*.nc</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">./gluemncbig -o surfDiag.nc mnc_test_*/surfDiag*.t*.nc</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">./gluemncbig -o phiHyd.nc mnc_test_*/phiHyd*.t*.nc</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash">./gluemncbig -o phiHydLow.nc mnc_test_*/phiHydLow*.t*.nc</span></span><br><span class="line"><span class="meta prompt_">% </span><span class="language-bash"><span class="built_in">ln</span> -s mnc_test_0001/dynStDiag.0000000000.t001.nc dynStDiag.nc</span></span><br></pre></td></tr></table></figure>

<p>主要的netCDF输出文件包括：</p>
<ul>
<li><code>grid.nc</code>：包含模型网格变量</li>
<li><code>state.nc</code>：包含状态变量（$U, V, W, Temp, S, Eta$）的快照</li>
<li><code>surfDig.nc</code>：包含<code>data.diagnostics</code>的列表1指定的二维诊断量（ETAN, TRELAX, MXDEPTH等）</li>
<li><code>dynDiag.c</code>：包含列表2指定的三维诊断量（THETA, PHIHYD, UVEL, VVEL, WVEL等）</li>
<li><code>dynStDiag.nc</code>：包含统计-动力学诊断量</li>
<li><code>phiHyd.nc</code>, <code>phiHydLow.nc</code>：分别为静水压势异常的三维快照场和底部静水压势异常的二维快照场</li>
</ul>
<h3 id="4-结果分析"><a href="#4-结果分析" class="headerlink" title="4. 结果分析"></a>4. 结果分析</h3><p>我们将模型运行100年，查看系统达到稳态之后的状态。由于系统运行所需的时间较长，且占用存储空间较大，我们在本文中就不改变参数进行实验了，我们将对单次运行之后得到的结果进行分析。</p>
<div style="width:60%;margin:auto"><img src="/2024/12/22/MITgcm/fig_4_6_b.png" class=""></div>

<center>
<font color="#A9A9A9">图3  不同深度处的平均位温</font>
</center>

<div style="width:60%;margin:auto"><img src="/2024/12/22/MITgcm/fig_4_6_c.png" class=""></div>

<center>
<font color="#A9A9A9">图4  不同深度处的位温标准差</font>
</center>

<p>模型表层的温度最开始为$30^\circ C$，在外界的forcing下表层温度迅速降低，从图3中可以看到在最开始的5年内，表层温度差不多就达到了平衡，而深度的海水温度变化比较缓慢。从图4中可以看到，表层海水的梯度较大，水平方向上分布不均匀，而深层海水的水平方向比较均匀。</p>
<div style="width:60%;margin:auto"><img src="/2024/12/22/MITgcm/fig_4_7_a.png" class=""></div>

<center>
<font color="#A9A9A9">图5  海平面的高度分布</font>
</center>

<div style="width:60%;margin:auto"><img src="/2024/12/22/MITgcm/fig_4_7_b.png" class=""></div>

<center>
<font color="#A9A9A9">图6  温度弛豫的分布</font>
</center>

<p>模型在运行到100年的时候已经很接近稳态了，我们取这一年的年平均数据进行分析。图5显示了海平面的高度，可以看到在风应力和科里奥利力的作用下，海平面的高度呈现南高北低。图6显示了温度弛豫的分布，我们可以看到海水与外界的热量交换在水平方向上是怎么分布的，表层海水在内部输送和表面交换的作用下达到热量平衡。</p>
<div style="width:60%;margin:auto"><img src="/2024/12/22/MITgcm/fig_4_9_a.png" class=""></div>

<center>
<font color="#A9A9A9">图7  位温在400m深度的水平分布</font>
</center>

<div style="width:60%;margin:auto"><img src="/2024/12/22/MITgcm/fig_4_9_b.png" class=""></div>

<center>
<font color="#A9A9A9">图8  位温在北纬$33.5^\circ$的分布</font>
</center>

<p>我们还可以观察海水内部的温度是如何分布的，图7和图8分别显示了在400m深度和北纬$33.5^\circ$处的温度分布。</p>
<h3 id="5-总结"><a href="#5-总结" class="headerlink" title="5. 总结"></a>5. 总结</h3><p>本文介绍了MITgcm模式的安装、编译与运行过程。MITgcm功能强大、使用方便，如果想要更深入地学习，可以访问<a target="_blank" rel="noopener" href="https://mitgcm.readthedocs.io/">官方文档</a>，里面不仅包含对本文所有内容的介绍，还有对所有tutorial实验的讲解，以及更加灵活的物理过程和参数化方案的配置。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2024/12/05/WRF/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/05/WRF/" class="post-title-link" itemprop="url">WRF：理想实验指南</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-12-05 16:38:37 / 修改时间：23:53:43" itemprop="dateCreated datePublished" datetime="2024-12-05T16:38:37+08:00">2024-12-05</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%89%A9%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">物理</span></a>
                </span>
            </span>

          
            <span id="/2024/12/05/WRF/" class="post-meta-item leancloud_visitors" data-flag-title="WRF：理想实验指南" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.1k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h3 id="1-WRF模式介绍"><a href="#1-WRF模式介绍" class="headerlink" title="1. WRF模式介绍"></a>1. WRF模式介绍</h3><p>WRF (Weather Research and Forecasting) 模式是一个开源、灵活、模块化的数值天气预报和大气模拟工具。</p>
<p>WRF模式的结构如图所示，其最为核心的部分是可执行程序wrf.exe（后缀仅仅是出于习惯，因为Linux并不以后缀标识文件类别）。</p>
<div style="width:60%;margin:auto"><img src="/2024/12/05/WRF/flowchart.png" class=""></div>

<p>WRF模型可以运行两种不同的模拟：ideal和real。理想实验通常利用已有的sounding数据为WRF模型生成初始条件，而真实模拟则要求利用WPS（WRF Preprocessing System）进行前处理，将真实的测量数据转化为WRF模型的初始条件。WRF模型的可执行文件（wrf.exe）本身并不随着实验类型的不同而改变，但是这两种不同的实验对应两种不同的前处理程序，分别是ideal.exe和real.exe，它们都需要在WRF模式运行之前执行。</p>
<p>WRF的运行通常分为以下几个阶段：</p>
<ol>
<li>准备环境</li>
</ol>
<ul>
<li>安装依赖库（NetCDF、MPI等）</li>
<li>编译WRF</li>
</ul>
<ol start="2">
<li>数据处理（用于真实模拟）</li>
</ol>
<ul>
<li>使用WPS处理初始条件和边界条件</li>
</ul>
<ol start="3">
<li>运行模式</li>
</ol>
<ul>
<li>修改参数和初始廓线</li>
<li>运行初始化程序和主程序</li>
</ul>
<ol start="4">
<li>结果分析</li>
</ol>
<ul>
<li>使用NCL等数据分析工具对模式运行的结果进行分析和展示</li>
</ul>
<p>本文的后几个部分会分别介绍第1,3,4个步骤。步骤2是专为真实模拟而进行的预处理，感兴趣的读者可以自行查阅<a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/wrf/users/docs/user_guide_v4/contents.html">WRF官方文档</a>。</p>
<h3 id="2-环境准备"><a href="#2-环境准备" class="headerlink" title="2. 环境准备"></a>2. 环境准备</h3><p>对于如何准备系统环境和编译WRF，官方有一个详细的指南：<a target="_blank" rel="noopener" href="https://www2.mmm.ucar.edu/wrf/OnLineTutorial/compilation_tutorial.php">How to Compile WRF: The Complete Process</a>，这里仅做一个简单的介绍。</p>
<h4 id="2-1-安装依赖库"><a href="#2-1-安装依赖库" class="headerlink" title="2.1 安装依赖库"></a>2.1 安装依赖库</h4><p>WRF模式运行所必不可少的库有且仅有<a target="_blank" rel="noopener" href="https://www.unidata.ucar.edu/software/netcdf/">NetCDF</a>，同时如果想要进行并行运算，还需要安装<a target="_blank" rel="noopener" href="https://www.open-mpi.org/">OpenMPI</a>。安装之后可以通过<code>ncdump --version</code>和<code>mpirun --version</code>来检查自己是否安装成功，以及查看软件的版本。</p>
<h4 id="2-2-下载WRF"><a href="#2-2-下载WRF" class="headerlink" title="2.2 下载WRF"></a>2.2 下载WRF</h4><p>可以直接git clone：</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/wrf-model/WRF</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/wrf-model/WPS</span><br></pre></td></tr></table></figure>

<p>如果遇到网络问题，也可以到<a target="_blank" rel="noopener" href="https://github.com/wrf-model">github</a>上手动下载。</p>
<p>下载解压之后，WRF的目录中应该有如下内容：</p>
<div style="width:90%;margin:auto"><img src="/2024/12/05/WRF/WRF_dir.png" class=""></div>

<h4 id="2-3-编译WRF"><a href="#2-3-编译WRF" class="headerlink" title="2.3 编译WRF"></a>2.3 编译WRF</h4><p>首先运行</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure</span><br></pre></td></tr></table></figure>

<div style="width:90%;margin:auto"><img src="/2024/12/05/WRF/configure.png" class=""></div>

<p>在出现的列表中根据系统和编译器选择合适的选项，并根据需要选择串行或并行（并行需要有OpenMPI库的支持）。选择之后还需要对嵌套网络进行选择，对于简单情况直接保持默认即可。</p>
<p>配置之后，在目录中应该会出现一个名为<code>configure.wrf</code>的文件。此时对于4.5.x&#x2F;4.6.x的版本，还需要进行一步额外的操作才能成功编译，需要在<code>configure.wrf</code>文件的<code>LIB_EXTERNAL</code>的最后添加<code>-lnetcdf</code>，而对于更老的版本4.2.x&#x2F;4.3.x&#x2F;4.4.x，则不需要进行这步操作。</p>
<p>之后就可以直接进行编译了。首先我们可以打开 test 目录查看可用的理想实验，包括</p>
<div style="width:60%;margin:auto"><img src="/2024/12/05/WRF/Ideal_1.png" class=""></div>

<div style="width:60%;margin:auto"><img src="/2024/12/05/WRF/Ideal_2.png" class=""></div>

<p>确定自己要运行的理想实验之后，回到 WRF 目录，输入</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./compile -j 4 em_grav2d_x</span><br></pre></td></tr></table></figure>

<p>其中，<code>-j 4</code>代表使用4个线程进行并行编译，这个选项不是必须的，可以根据需要删去或更改；<code>em_grav2d_x</code>是本文中理想实验的名称，可以替换成<code>test</code>目录中的其他理想实验。</p>
<p>如果编译没有问题，应该会显示”Executables successfully built”，这是我们进入理想实验的目录<code>test/em_grav2d_x</code>，可以看到出现了可执行程序<code>ideal.exe</code>和<code>wrf.exe</code>。</p>
<h3 id="3-理想实验：以em-grav2d-x为例"><a href="#3-理想实验：以em-grav2d-x为例" class="headerlink" title="3. 理想实验：以em_grav2d_x为例"></a>3. 理想实验：以<code>em_grav2d_x</code>为例</h3><p>本文采用的理想实验是<code>em_grav2d_x</code>，用于模拟二维重力流。该实验基于Straka等人1993年发表的文章<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Straka et al., Numerical Solutions of a Nonlinear Density Current: A Benchmark Solutioon and Comparisons, *Int J Numer Meth Fl*, **17** (1): 1-22, 1993]">[1]</span></a></sup>，在X-Z平面进行，水平方向满足周期性边界条件。</p>
<p>在运行程序之前，首先需要配置实验参数，这些参数在<code>namelist.input</code>文件中定义，其具体含义可以参见<code>README.namelist</code>，与本实验有关的参数及其含义如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">run_minutes      = 15,      ! 模拟时长：15 分钟（控制模拟的时间范围）</span><br><span class="line">history_interval = 1,       ! 输出结果的时间间隔：每 1 分钟（模拟时间）输出一次</span><br><span class="line"></span><br><span class="line">time_step = 1,              ! 时间步长：1 秒（建议 dx/6 以确保稳定性）</span><br><span class="line">e_we      = 513,            ! X 方向的网格点数：513</span><br><span class="line">e_sn      = 3,              ! Y 方向的网格点数：3（保持 2D 模拟）</span><br><span class="line">e_vert    = 65,             ! 垂直方向的网格点数：65</span><br><span class="line">dx        = 100,            ! X 方向的水平分辨率：100 米</span><br><span class="line">dy        = 100,            ! Y 方向的水平分辨率：100 米</span><br><span class="line">ztop      = 6409.,          ! 模拟顶部的高度：6409 米</span><br><span class="line"></span><br><span class="line">diff_opt          = 2,        ! 水平扩散方案：2（隐式扩散）</span><br><span class="line">khdif             = 75,       ! 水平扩散系数：75</span><br><span class="line">kvdif             = 75,       ! 垂直扩散系数：75</span><br><span class="line">h_mom_adv_order   = 5,        ! 水平动量对流项的离散阶数：5 阶（高精度）</span><br><span class="line">v_mom_adv_order   = 3,        ! 垂直动量对流项的离散阶数：3 阶</span><br><span class="line">h_sca_adv_order   = 5,        ! 水平标量对流项的离散阶数：5 阶</span><br><span class="line">v_sca_adv_order   = 3,        ! 垂直标量对流项的离散阶数：3 阶</span><br><span class="line">non_hydrostatic   = .true.,   ! 非静力模式：启用</span><br><span class="line"></span><br><span class="line">periodic_x        = .true.,   ! X 方向的周期边界：启用（允许冷池自由传播）</span><br><span class="line">periodic_y        = .true.,   ! Y 方向的周期边界：启用</span><br></pre></td></tr></table></figure>

<p>接着可以通过<code>input_sounding</code>文件设置初始大气的垂直廓线，文件夹中给出了静止大气的廓线和<code>&#39;input_sounding.um=20&#39;</code>，也就是有20m&#x2F;s的水平风速的廓线，当然也可以根据需要自己定义大气的初始廓线。</p>
<p>完成参数和初始廓线的配置之后，就可以运行初始化程序<code>./ideal.exe</code>，注意，每次修改完<code>namelist.input</code>及<code>input_sounding</code>文件之后，都需要重新运行<code>ideal</code>，否则修改将不会生效。</p>
<p>之后我们就可以运行主程序了</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./wrf.exe &amp;</span><br></pre></td></tr></table></figure>

<p>命令最后的<code>&amp;</code>表示将程序提交到后台运行，这样即使前台的进程退出，程序依然可以正常工作。</p>
<p>如果想要中止之前的任务，可以先利用<code>top</code>命令查看自己作业的进程ID（PID），之后在命令行输入<code>kill &lt;PID&gt;</code>就可以结束掉该进程。</p>
<p>程序运行的结果将会保存在<code>wrfout_d01_0001-01-01_00_00_00</code>中，可以利用NCL等工具进行分析和后处理。</p>
<h3 id="4-结果分析"><a href="#4-结果分析" class="headerlink" title="4. 结果分析"></a>4. 结果分析</h3><p>WRF模式支持多种分析结果的方式，包括NCL, RIP, ARWpost, UPP和VAPOR。程序默认输出的文件是netCDF格式的，可以利用NCL方便地进行处理。</p>
<p>作为简易快捷的查看方式，<code>ncview</code>可以让我们立刻观察到结果。但是为了更清晰地分析结果，可以使用NCL语言或者python的<code>netCDF4</code>库。</p>
<p>对于默认的初始参数，程序运行的结果如下：</p>
<div style="width:70%;margin:auto"><img src="/2024/12/05/WRF/test_00.png" class=""></div>

<p>可以看到，这团冷空气下落到地面的过程中就在水平方向上不断延展，之后会断裂成左右对称的两部分，并继续沿着地面移动。</p>
<p>我们可以改变实验中的参数，观察对于结果有什么影响。</p>
<ol>
<li>改变水平风速：修改<code>input_sounding</code>文件中的水平风速场，将水平风速分别设置为0,20,40，得到的结果如下（从上到下风速依次为0,20,40）：</li>
</ol>
<div style="width:60%;margin:auto"><img src="/2024/12/05/WRF/u_wind.png" class=""></div>

<p>可以看到，水平的风速对于系统仅有一个水平方向随时间平移的作用，对于气团的结构则几乎没有影响。</p>
<ol start="2">
<li>改变分辨率：直接利用文件夹中提供的<code>namelist.input.dx=200</code>和<code>namelist.input.dx=400</code>文件，得到的结果如下（从上到下分辨率依次为100,200,400）：</li>
</ol>
<div style="width:60%;margin:auto"><img src="/2024/12/05/WRF/dx.png" class=""></div>

<p>分辨率降低的时候，程序运算的时间显著减少，但是代价是失去了气团的精细结构。</p>
<ol start="3">
<li>改变扩散系数：修改<code>namelist.input</code>中的<code>khdif</code>和<code>kvdif</code>，得到的结果如下（从上到下扩散系数分别为50,75,100，其中75是默认值）：</li>
</ol>
<div style="width:60%;margin:auto"><img src="/2024/12/05/WRF/vis.png" class=""></div>

<p>综上，我们成功地编译并运行了WRF模式，并对em_grav2d_x这个简单的二位重力流问题进行了理想实验。<div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;">[Straka et al., Numerical Solutions of a Nonlinear Density Current: A Benchmark Solutioon and Comparisons, <em>Int J Numer Meth Fl</em>, <strong>17</strong> (1): 1-22, 1993]<a href="#fnref:1" rev="footnote"> ↩</a></span></li></ol></div></div></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2024/12/03/%E5%85%89%E5%AD%A6%E8%AE%A8%E8%AE%BA%E7%8F%AD/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/12/03/%E5%85%89%E5%AD%A6%E8%AE%A8%E8%AE%BA%E7%8F%AD/" class="post-title-link" itemprop="url">光学讨论班</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-03 20:30:17" itemprop="dateCreated datePublished" datetime="2024-12-03T20:30:17+08:00">2024-12-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-12-26 10:47:37" itemprop="dateModified" datetime="2024-12-26T10:47:37+08:00">2024-12-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">课程</span></a>
                </span>
            </span>

          
            <span id="/2024/12/03/%E5%85%89%E5%AD%A6%E8%AE%A8%E8%AE%BA%E7%8F%AD/" class="post-meta-item leancloud_visitors" data-flag-title="光学讨论班" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>132</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>在这里放一下我本学期光学讨论班的Slides，我的两次报告的内容分别是：</p>
<ul>
<li><a href="https://williamwyl.cn/pdf/optics_seminar/OFC.pdf">光学频率梳及其应用</a><ul>
<li>光学频率梳的基本原理、光学频率梳的分类和实现方法、光学频率梳在精密测量、天文、激光雷达等领域中的应用；</li>
</ul>
</li>
<li><a href="https://williamwyl.cn/pdf/optics_seminar/UltrafastPulsedLaser.pdf">超短脉冲激光技术</a><ul>
<li>脉冲激光的实现原理，在时域上如何实现纳秒、皮秒和飞秒脉冲激光；啁啾脉冲放大技术及其应用；</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2024/09/22/%E8%BF%91%E4%BB%A3%E7%89%A9%E7%90%86%E5%AE%9E%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/09/22/%E8%BF%91%E4%BB%A3%E7%89%A9%E7%90%86%E5%AE%9E%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89/" class="post-title-link" itemprop="url">近代物理实验（一）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-09-22 16:05:02" itemprop="dateCreated datePublished" datetime="2024-09-22T16:05:02+08:00">2024-09-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-09-23 15:07:27" itemprop="dateModified" datetime="2024-09-23T15:07:27+08:00">2024-09-23</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%9E%E9%AA%8C/" itemprop="url" rel="index"><span itemprop="name">实验</span></a>
                </span>
            </span>

          
            <span id="/2024/09/22/%E8%BF%91%E4%BB%A3%E7%89%A9%E7%90%86%E5%AE%9E%E9%AA%8C%EF%BC%88%E4%B8%80%EF%BC%89/" class="post-meta-item leancloud_visitors" data-flag-title="近代物理实验（一）" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>228</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>我在大二寒假的时候计划的大二下选课本来是 不包括近代物理实验的；然而，由于我原本的选课计划中的计算物理和数理下时间冲突了，我不得不放弃计算物理而选择近代物理实验。</p>
<p>近代物理实验一共有7个实验，在学校的选课的补退选第二阶段截止之后会发通知在<a target="_blank" rel="noopener" href="http://www.pec.pku.edu.cn/">实验中心网站</a>上选择实验。一共有三十多个实验可供选择，在时间选择上也比较自由，不过一般来说都是隔周做一次实验，避免连着两周做实验造成过大的实验报告书写压力。</p>
<ul>
<li><a href="https://williamwyl.cn/pdf/mpl/MRI.pdf">核磁共振</a></li>
<li><a href="https://williamwyl.cn/pdf/mpl/Mossb.pdf">穆斯堡尔效应</a></li>
<li><a href="https://williamwyl.cn/pdf/mpl/TEM.pdf">透射电子显微镜</a></li>
<li><a href="https://williamwyl.cn/pdf/mpl/Kerr.pdf">磁光克尔效应</a></li>
<li><a href="https://williamwyl.cn/pdf/mpl/STM.pdf">扫描隧穿显微镜</a></li>
<li><a href="https://williamwyl.cn/pdf/mpl/NMRI.pdf">脉冲核磁共振与成像</a></li>
<li><a href="https://williamwyl.cn/pdf/mpl/Compton.pdf">康普顿散射</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2024/01/11/CTAW_essay/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2024/01/11/CTAW_essay/" class="post-title-link" itemprop="url">CTAW 课程论文</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-01-11 10:25:52 / 修改时间：10:35:14" itemprop="dateCreated datePublished" datetime="2024-01-11T10:25:52+08:00">2024-01-11</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E8%AF%BE%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">课程</span></a>
                </span>
            </span>

          
            <span id="/2024/01/11/CTAW_essay/" class="post-meta-item leancloud_visitors" data-flag-title="CTAW 课程论文" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>7 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>这是我的批判性思维与学术写作课程的课程论文，这门课和我最初想象中的学术写作有一定的距离，这门课更加面向人文社科类的学术写作，而不是我更加希望的科学写作。这门课上的时候给我带来了不少的痛苦，但是整个课程上下来也就与之和解了，平心而论还是有一些收获的。</p>
<p>我的论文的pdf版可以在<a href="https://williamwyl.cn/pdf/ctaw/CTAW_ver_final.pdf">这里</a>看到，下面是原文：</p>
<center>
    <font size="6">Entangled Mentality: Ethical Concerns of Brain-Computer Interfaces</font>
</center>
Have you ever imagined what life would be like if our brains are able to be attached to a computer? You have probably seen in a film that a man is wearing a tremendous metallic helmet which is connected to a terrifying number of wires and tubes. This cyberpunk scene, once confined to science fiction, is now becoming a reality. With the journal *Nature Electronics* announced the Brain-Computer Interfaces (BCIs) as their technology of the year in 2023, BCIs are flourishing in the laboratories all over the world. You may have heard of *Neuralink*, the BCI technology company established by Elon Musk. In fact, *Neuralink* is already soliciting volunteers to participate in their clinical trial for their first BCI device. Other than *Neuralink*, tens of unicorn companies are rushing into the research of BCIs.

<p>In previous studies, the challenges of this new technology have been examined, indicating the huge impact BCIs might exert on human society (Maiseli et al., 2023). This article first presents a brief review of the development and applications of BCIs, followed by a detailed discussion on potential ethical and legal issues which might arise along with the BCI technology. To address these challenges, the article proposes a range of solutions.</p>
<p>Brain-computer interfaces, as the name suggests, are the technology that facilitate the interaction between human brain and the machines. Early attempts to collect and analyze human brain signals began in the last quarter of the 19th century (Stone &amp; Hughes, 2013), but it is only in the past decade that the field has been flooded with breakthroughs. Moreover, combined with deep brain stimulation (DBS) technology, BCIs are not limited to merely analyzing brain signals; they can also influence and directly stimulate them. Complex brain activities concerning emotions and cognitive process are essential aspects of human existence (UNESCO, 2023). Being able to capture and manipulate the human brain, BCIs are capable of achieving what beyond our imagination. The medical function is undoubtedly a priority in the application of the BCIs. BCIs can enable individuals with disabilities to control artificial limbs or to communicate through thought. In the world of entertainment, BCIs hold great promises to provide each consumer with unique experiences based on their neural signals (Steffen &amp; Orsolya, 2020). With sufficient funding and high research enthusiasm, BCIs are expected to reach commercialization in the near future, extending their application across various domains.</p>
<p>All technologies have their pros and cons, and BCIs are no exception. With the rapidly advancing development of this technology, which is intimately connected to the human mind, we are obliged to fully investigate the implications of this brand-new technology on human society. Similar to other bio-technologies, BCIs are having a profound impact on what it means to be a human, thereby challenging the moral and ethical compass of human society, as well as the legal frame which can only set restraints on existing technologies.</p>
<p>When it comes to monitoring our neural activity, the privacy problem stands a prior concern. Imagine how it feels to have your diary read by someone else, being monitored by a BCI is thousands of times worse. BCIs may potentially deprive us of our <em>mental privacy</em>, collect our neural data without our permission. Neural data, or personal brain data, are data containing information about the brain structure and working pattern. According to UNESCO (2021), a great amount of neural data are generated by our brain unconsciously, which can be collected by BCI devices without our knowledge, implying the fact that we are losing our mental privacy without even realizing it. This leakage of neural information may cause discriminatory practices. Like hepatitis B patients, people who are subconsciously depressed or violent can also be discriminated against in the workplace, making it harder for them to find work. The current legal system is inadequate in preventing large companies from infringing on citizens’ privacy (Sampson, 2021). The inexplicable nature of the human mind makes it even harder to clarify and therefore regulate the practice of intruding individual’s mental privacy.</p>
<p>The acquisition of detailed information about one’s thoughts also means a more profound understanding of behavior patterns and deep desires. Take a comparison between the recommendations on your social media with those of your friends, you will be amazed at the power of big data. Yet the current recommendations are merely based on your past behaviors. Presume that your brain activities, including subconscious feelings, are at full exposure to the BCIs, and these data are transmitted to third-party companies, then you will be trapped in the information cocoon woven by big companies for good. Under such circumstances, no decision can be free from influence of BCIs, which significantly undermines human <em>autonomy</em>, which refers to the ability to perform self-directed action without suffering from exterior interference (Beauchamp &amp; Childress, 2001, p. 101). Another term closely related to autonomy is <em>informed consent</em>. The article 6 of the <em>Universal Declaration on Bioethics and Human Rights</em> by UNESCO (2006) states that “Any preventive, diagnostic and therapeutic medical intervention is only to be carried out with the prior, free and informed consent of the person concerned, based on adequate information.” Due to the entangled nature between human mind and BCIs, there are challenges applying the principle of informed consent to the BCI technology as the risks and benefits of this newborn technology are still in assessment.</p>
<p>Equity and justice are the eternal pursuit of human society (Li, 2011). The disparity in wealth leads to differences in BCI accessibility, thus posing additional challenges to <em>social justice</em> (UNESCO, 2021, p. 61). This issue grows even more serious if the original medical-oriented BCIs are used for cognitive enhancement. For example, transcranial direct-current stimulation (tDCS) is a technology used to restore cognitive function in people with Alzheimer’s disease and depression (Majdi et al., 2022). Combined with tDCS, BCIs are potentially capable of reinforcing the cognitive function of healthy people. As Mirza and colleagues (2019) pointed out, the rich will undoubtedly have the advantage in obtaining such service, while the poor hardly have chance to do so. This may result in differences in academic and career success and exacerbate the situation of class solidification. Therefore, ensuring equitable access to BCIs is crucial to prevent the exacerbation of social inequalities.</p>
<p>New technologies give rise to new modes of production and generally lead to the development of productivity forces. We should always embrace new technologies which can bring progress to humankind. However, before we release new technology from the laboratory, we must fully assess its possible impact on the society and adequately respond to it. Consequently, measures must be taken in the application of new technologies to promote social equity and justice, so as to maximize the overall well-being of human race. In response to the problems mentioned above, we propose some feasible solutions here. Currently the development of BCIs is still in the early stage and no unified standard for the industry is established. Therefore, the first task is to set up special regulatory agencies in order to implement effective supervision and unified management. Secondly, a core element to ensure the healthy development of BCI technology is transparency (UNESCO, 2021, p.74). These data are deeply related to the mental privacy and thus should in no circumstance be transmitted to a third-party corporation or organization without the fully awareness and consent of the user. Another important measure to take is to confine the function of BCIs. While BCIs possess the capacity to influence an individual’s neural activity, it is imperative to prohibit their application in this manner due to the inadequately researched nature of the potential consequences. The use of BCIs should be restricted exclusively to therapeutic applications, analogous to the regulatory approach adopted for gene-editing technologies, thereby prohibiting their utilization for enhancement purposes. By imposing such functional limitations, the issue of unequal accessibility to BCIs would be mitigated, as cognitive enhancement would not be permitted.</p>
<p>In the previous discussion, we have explored the rapid development and broad applications of the BCI technology. The ethical and legal issues related to BCIs are carefully examined, including invasion of mental privacy, violation of autonomy and informed consent, as well as the equitable accessibility. In order to respond to these concerns, we proposed several solutions. By establishing special regulation agencies, ensuring transparency in BCI operation and limiting the enhancement function of the BCI devices, we can minimize the potential problems that might result from the BCI technology and promote social equity and justice. The development of BCI technology marks great progress in human’s knowledge of our neural system. It is foreseeable that this technology will profoundly change our way to engage with the real and digital world. It is our common hope that such new technology can bring benefits to humanity. In this entanglement between human mind and the machine, we must preserve our mental integrity and independence. Let’s embrace this future, steering technology towards progress of human society.</p>
<p> <strong>References</strong> </p>
<p>An interface connects. (2023). <em>Nature Electronics, 6</em>(2), 89–89. doi:10.1038&#x2F;s41928-023-00938-8</p>
<p>Beauchamp, T. L., &amp; Childress, J. F. (2013). <em>Principles of biomedical ethics</em> (7th ed.). Oxford University Press.</p>
<p>Li, Q. (2011). On equity, justice and the construction of a harmonious society. In Hu, Q. (Eds.), <em>Proceedings of 2011 International Conference on Education Science and Management Engineering (ESME 2011) ( VOLS 1-5,</em> pp. 147–149*)*. Beijing.</p>
<p>Maiseli, B., Abdalla, A. T., Massawe, L. V., Mbise, M., Mkocha, K., Nassor, N. A., Ismail, M., Michael, J., &amp; Kimambo, S. (2023). Brain–computer interface: Trend, challenges, and threats. <em>Brain Informatics</em>, <em>10</em>(1), 20. <a target="_blank" rel="noopener" href="https://doi.org/10.1186/s40708-023-00199-3">https://doi.org/10.1186/s40708-023-00199-3</a></p>
<p>Majdi, A., van Boekholdt, L., Sadigh-Eteghad, S. &amp; Mc Laughlin, M. (2022).  A systematic review and meta-analysis of transcranial direct-current stimulation effects on cognitive function in patients with Alzheimer’s disease. <em>Mol Psychiatry</em> <em>27</em>, 2000–2009. <a target="_blank" rel="noopener" href="https://doi.org/10.1038/s41380-022-01444-7">https://doi.org/10.1038/s41380-022-01444-7</a> </p>
<p>Mirza, M. U., Richter, A., Van Nes, E. H., &amp; Scheffer, M. (2019). Technology driven inequality leads to poverty and resource depletion. <em>Ecological Economics</em>, <em>160</em>, 215–226. <a target="_blank" rel="noopener" href="https://doi.org/10.1016/j.ecolecon.2019.02.015">https://doi.org/10.1016/j.ecolecon.2019.02.015</a></p>
<p>Sampson, F. (2021). Data privacy and security: Some legal and ethical challenges. In: Jahankhani, H., Kendzierskyj, S., &amp; Akhgar, B. (Eds.) <em>Information security technologies for controlling pandemics</em> (pp. 109-134). A. Springer, Cham. <a target="_blank" rel="noopener" href="https://doi.org/10.1007/978-3-030-72120-6_4">https://doi.org/10.1007/978-3-030-72120-6_4</a> </p>
<p>Steinert, S. &amp; Friedrich, O. (2020). Wired emotions: Ethical issues of affective Brain–Computer Interfaces. <em>Science and Engineering Ethics</em>, <em>26</em>(1), 351–367. <a target="_blank" rel="noopener" href="https://doi.org/10.1007/s11948-019-00087-2">https://doi.org/10.1007/s11948-019-00087-2</a></p>
<p>Stone, J. L., &amp; Hughes, J. R. (2013). Early history of electroencephalography and establishment of the American clinical neurophysiology society. <em>Journal of Clinical Neurophysiology</em>, <em>30</em>(1), 28–44. <a target="_blank" rel="noopener" href="https://doi.org/10.1097/WNP.0b013e31827edb2d">https://doi.org/10.1097/WNP.0b013e31827edb2d</a></p>
<p>United Nations Educational, Scientific and Cultural Organization (UNESCO). (2006). Universal Declaration on Bioethics and Human Rights. <em>Jahrbuch für Wissenschaft und Ethik</em>, <em>11</em>(1), 377-385. <a target="_blank" rel="noopener" href="https://doi.org/10.1515/9783110186406.377">https://doi.org/10.1515/9783110186406.377</a></p>
<p>United Nations Educational, Scientific and Cultural Organization (UNESCO). (2021). <em>Ethical issues of neurotechnology. IBC Report series</em>. UNESCO. <a target="_blank" rel="noopener" href="https://doi.org/10.54678/QNKB6229">https://doi.org/10.54678/QNKB6229</a></p>
<p>United Nations Educational, Scientific and Cultural Organization (UNESCO). (2023). <em>Unveiling the neurotechnology landscape. Scientific advancements innovations and major trends</em>. UNESCO. <a target="_blank" rel="noopener" href="https://doi.org/10.54678/OCBM4164">https://doi.org/10.54678/OCBM4164</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2023/06/30/%E6%99%AE%E7%89%A9%E5%AE%9E%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/06/30/%E6%99%AE%E7%89%A9%E5%AE%9E%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89/" class="post-title-link" itemprop="url">普通物理实验（二）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-06-30 17:34:21" itemprop="dateCreated datePublished" datetime="2023-06-30T17:34:21+08:00">2023-06-30</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-19 20:05:46" itemprop="dateModified" datetime="2023-09-19T20:05:46+08:00">2023-09-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%AE%9E%E9%AA%8C/" itemprop="url" rel="index"><span itemprop="name">实验</span></a>
                </span>
            </span>

          
            <span id="/2023/06/30/%E6%99%AE%E7%89%A9%E5%AE%9E%E9%AA%8C%EF%BC%88%E4%BA%8C%EF%BC%89/" class="post-meta-item leancloud_visitors" data-flag-title="普通物理实验（二）" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>344</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>大一下学期的普物实验课的模式和大一上学期的时候一样，只是课堂实验从原来的六个单周实验改成了两个双周实验加上两个单周实验。</p>
<h2 id="课堂实验："><a href="#课堂实验：" class="headerlink" title="课堂实验："></a>课堂实验：</h2><ul>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%AF%BE%E5%A0%82%E5%AE%9E%E9%AA%8C/01.pdf">基于虚拟仪器技术的综合电路实验</a></li>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%AF%BE%E5%A0%82%E5%AE%9E%E9%AA%8C/02.pdf">光信息处理</a></li>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%AF%BE%E5%A0%82%E5%AE%9E%E9%AA%8C/03.pdf">弦上驻波实验</a></li>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%AF%BE%E5%A0%82%E5%AE%9E%E9%AA%8C/04.pdf">真空镀膜实验</a></li>
</ul>
<h2 id="自主实验："><a href="#自主实验：" class="headerlink" title="自主实验："></a>自主实验：</h2><ul>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%87%AA%E4%B8%BB%E5%AE%9E%E9%AA%8C/01.pdf">用示波器观测动态磁滞回线</a></li>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%87%AA%E4%B8%BB%E5%AE%9E%E9%AA%8C/02.pdf">RLC 串联电路的暂态过程</a></li>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%87%AA%E4%B8%BB%E5%AE%9E%E9%AA%8C/03.pdf">动态法测定良导体的热导率</a></li>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%87%AA%E4%B8%BB%E5%AE%9E%E9%AA%8C/04.pdf">复摆实验</a></li>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%87%AA%E4%B8%BB%E5%AE%9E%E9%AA%8C/05.pdf">观察光的偏振现象</a></li>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E8%87%AA%E4%B8%BB%E5%AE%9E%E9%AA%8C/06.pdf">光栅特性及测定光波波长</a></li>
</ul>
<h2 id="开放实验："><a href="#开放实验：" class="headerlink" title="开放实验："></a>开放实验：</h2><p>开放实验的题目来源依然是IYPT2023，我继续和秦子衡搭档进行开放实验。我们抽到的题目是第11题——铁氧体棒上的球，最开始我们抽到这道题的时候我还挺高兴，因为在六道题目里面这道题看上去是相对简单的一道。然而后来当我们真正开始着手进行这个实验的时候就傻眼了——我们根本无法做出实验现象。经过了许多波折，我们最终呈现出来了了一个几乎是纯理论的“实验报告”，好在老师们也理解题目的难处，没有在给分上为难我们。</p>
<ul>
<li><a href="https://williamwyl.cn/pdf/gphyexp2/%E5%BC%80%E6%94%BE%E5%AE%9E%E9%AA%8C/01.pdf">铁氧体棒上的球</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2023/03/14/C%E8%AF%AD%E8%A8%80%E8%92%99%E7%89%B9%E5%8D%A1%E7%BD%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/03/14/C%E8%AF%AD%E8%A8%80%E8%92%99%E7%89%B9%E5%8D%A1%E7%BD%97/" class="post-title-link" itemprop="url">C语言蒙特卡罗</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-03-14 21:17:26" itemprop="dateCreated datePublished" datetime="2023-03-14T21:17:26+08:00">2023-03-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-09-19 20:12:24" itemprop="dateModified" datetime="2023-09-19T20:12:24+08:00">2023-09-19</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E7%89%A9%E7%90%86/" itemprop="url" rel="index"><span itemprop="name">物理</span></a>
                </span>
            </span>

          
            <span id="/2023/03/14/C%E8%AF%AD%E8%A8%80%E8%92%99%E7%89%B9%E5%8D%A1%E7%BD%97/" class="post-meta-item leancloud_visitors" data-flag-title="C语言蒙特卡罗" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>1.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>5 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>2023.9.19更新：学完统计回头来看，这只不过是一点非常fundamental的技术，似乎不值得专门挂一篇blog，但毕竟这小东西还挺别致，当时也让我着迷了一晚上，所以这篇就保留着吧。</p>
<hr>
<p>今天看了《Statistical Data Analysis》一书中关于Monte Carlo方法的介绍，觉得非常有趣，遂动手用C将其实现，源代码在本篇blog的结尾处。</p>
<div style="width:60%;margin:auto"><img src="/2023/03/14/C%E8%AF%AD%E8%A8%80%E8%92%99%E7%89%B9%E5%8D%A1%E7%BD%97/maxwell.png" class=""></div>

<center>
<font color="#A9A9A9">生成的Maxwell速率分布</font>
</center>

<p>程序整体由三个部分组成，分别是生成单位随机数、Transformation method和Acceptance Rejection method<sup id="fnref:1"><a href="#fn:1" rel="footnote"><span class="hint--top hint--error hint--medium hint--rounded hint--bounce" aria-label="[Cowan, G. Statistical Data Analysis. Clarendon Press, 1998.](https://books.google.com.hk/books?id=JhL2FiF3hO4C)">[1]</span></a></sup>。</p>
<p>生成单位随机数所使用的是<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Linear_congruential_generator">Linear congruential generator算法</a>，由于取的modulus比较大，所以能够实现比rand()函数更加精细的生成结果。最初的种子来自系统时间，这就保证了每次生成的结果是不同的。生成的随机数必然是整数，所以要将其单位化，之后还要根据实际需要将其进行平移和伸缩。</p>
<p>Transformation方法的概述如下：设$F(x)$为随机变量$x$的累积分布函数，如果我们取$y&#x3D;F(x),F(x)\in [0,1]$作为一个新的随机变量，那么$\frac{\text{d}y}{\text{d}x}&#x3D;F’(x)&#x3D;f(x)$，所以随机变量$y$所满足的pdf(probability density function)函数为</p>
<p>$$g(y)&#x3D;f(x)|\frac{\text{d}x}{\text{d}y}|&#x3D;1$$</p>
<p>也就是$y$实际上服从$[0,1]$上的均匀分布。根据这一点，我们可以反向生成目标分布，因为均匀分布是非常容易实现的。现在我们将$x$视为$y$的函数，那么我们有</p>
<p>$$F(x(y))&#x3D;\int_{-\infty}^{x(y)}f(t)\text{d}t&#x3D;y$$</p>
<p>将这个式子积分就得到了$x(y)$和$y$的函数，从中可以（对于比较简单的函数）将$x(y)$反解出来。利用这个关系和已经生成好的$y$，就可以生成服从目标分布的$x$。</p>
<p>Transformation的概念非常清晰，但缺点也是显而易见的：当函数比较复杂的时候反解$x(y)$的工作几乎是不可能的。这时我们可以利用另一种方法——<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Rejection_sampling">Acceptance Rejection method</a>。</p>
<p>这种方法的步骤如下：（1）生成位于$[x_{min},x_{max}]$的均匀分布的$x$序列；（2）生成位于$[0,f_{max}]$的均匀分布的$u$序列；（3）如果$u&lt;f(x)$，则接受$x$，否则就拒绝$x$。由于在$x$处，$x$被接受的概率正比于$f(x)$，所以得到的分布也是服从$f(x)$的。</p>
<p>然而这种方法也有其缺点：当$f(x)$有尖峰和长尾的时候，效率很低下，往往发生的情况是生成了20个$x$，也不一定有一个能被接受。所以我们可以对这种方法进行进一步的改进：将初始的矩形域修改为小一点的域。也就是首先寻找一个能将$f(x)$包括进去的曲线$g(x)$，然后（1）生成一个服从$\frac{g(x)}{\int g(t)\text{d}t}$的$x$；（2）生成一个服从$[0,g(x)]$均匀分布的$u$；（3）如果$u&lt;f(x)$，则接受$x$，重复以上步骤。但是由于目前缺少关于这种方法的实例，我也没有迫切的改进效率的需求，我暂时没有在程序中包括这种改进后的方法。</p>
<p>以下是程序的源代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*定义multiplier和modulus*/</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> M 4294967296 <span class="comment">// 2^32</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> A 1664525</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> C 1013904223</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> PI 3.14159265358979323846</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*定义整数和浮点数两种顺序表*/</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">intseq</span> &#123;</span></span><br><span class="line">	<span class="type">int</span> MAXNUM;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span>* element;</span><br><span class="line">&#125;; <span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">intseq</span>* <span class="title">Pintseq</span>;</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">floatseq</span> &#123;</span></span><br><span class="line">	<span class="type">int</span> MAXNUM;</span><br><span class="line">	<span class="type">float</span>* element;</span><br><span class="line">&#125;; <span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">floatseq</span>* <span class="title">Pfloatseq</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*建立空表*/</span></span><br><span class="line">Pintseq <span class="title function_">createintseq</span><span class="params">(<span class="type">int</span> m)</span> &#123;</span><br><span class="line">	Pintseq pis = (Pintseq)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> intseq));</span><br><span class="line">	<span class="keyword">if</span> (pis != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		pis-&gt;element = (<span class="type">unsigned</span> <span class="type">int</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">unsigned</span> <span class="type">int</span>) * m);</span><br><span class="line">		<span class="keyword">if</span> (pis-&gt;element) &#123;</span><br><span class="line">			pis-&gt;MAXNUM = m;</span><br><span class="line">			<span class="keyword">return</span> pis;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">free</span>(pis);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Out of space!&quot;</span>); <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">Pfloatseq <span class="title function_">createfloatseq</span><span class="params">(<span class="type">int</span> m)</span> &#123;</span><br><span class="line">	Pfloatseq pfs = (Pfloatseq)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> floatseq));</span><br><span class="line">	<span class="keyword">if</span> (pfs != <span class="literal">NULL</span>) &#123;</span><br><span class="line">		pfs-&gt;element = (<span class="type">float</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="type">float</span>) * m);</span><br><span class="line">		<span class="keyword">if</span> (pfs-&gt;element) &#123;</span><br><span class="line">			pfs-&gt;MAXNUM = m;</span><br><span class="line">			<span class="keyword">return</span> pfs;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">else</span> <span class="built_in">free</span>(pfs);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Out of space!&quot;</span>); <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*新建随机数（原始整数）顺序表，并返回指针*/</span></span><br><span class="line">Pintseq <span class="title function_">Random</span><span class="params">(<span class="type">int</span> size, <span class="type">unsigned</span> see)</span> &#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="type">unsigned</span> <span class="type">int</span> seed;</span><br><span class="line">	<span class="keyword">if</span> (see == <span class="number">0</span>) &#123; seed = (<span class="type">unsigned</span>)time(<span class="literal">NULL</span>); &#125;</span><br><span class="line">	<span class="keyword">else</span> &#123; seed = (<span class="type">unsigned</span>)time(<span class="literal">NULL</span>); seed = seed * see; &#125;</span><br><span class="line">	Pintseq pis = createintseq(size);</span><br><span class="line">	pis-&gt;element[<span class="number">0</span>] = (A * seed + C) % M;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">1</span>; i &lt; pis-&gt;MAXNUM; i++) &#123;</span><br><span class="line">		pis-&gt;element[i] = (A * pis-&gt;element[i - <span class="number">1</span>] + C) % M;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> pis;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*输出（打印至屏幕）*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">printintseq</span><span class="params">(Pintseq pis)</span> &#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pis-&gt;MAXNUM; i++) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, pis-&gt;element[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">void</span> <span class="title function_">printfloatseq</span><span class="params">(Pfloatseq pfs)</span> &#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pfs-&gt;MAXNUM; i++) &#123;</span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;%f\n&quot;</span>, pfs-&gt;element[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*单位化原始随机数*/</span></span><br><span class="line">Pfloatseq <span class="title function_">unifying</span><span class="params">(Pintseq pis)</span> &#123;</span><br><span class="line">	Pfloatseq pfs = createfloatseq(pis-&gt;MAXNUM);</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pfs-&gt;MAXNUM; i++) &#123;</span><br><span class="line">		pfs-&gt;element[i] = (<span class="type">float</span>)pis-&gt;element[i] / M;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> pfs;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*对随机数进行transform*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">transform</span><span class="params">(Pfloatseq pfs)</span> &#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pfs-&gt;MAXNUM; i++) &#123;</span><br><span class="line">		pfs-&gt;element[i] = -<span class="built_in">log</span>(pfs-&gt;element[i]);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*对随机数进行区间的平移和伸缩变换*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">moveandscale</span><span class="params">(Pfloatseq pfs, <span class="type">float</span> xmin, <span class="type">float</span> xmax)</span> &#123;</span><br><span class="line">	<span class="type">int</span> i;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pfs-&gt;MAXNUM; i++) &#123;</span><br><span class="line">		pfs-&gt;element[i] = xmin + pfs-&gt;element[i] * (xmax - xmin);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*进行acceptance-rejection筛选，并输出结果*/</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">acceptance_rejection</span><span class="params">(Pfloatseq pxs, Pfloatseq pus)</span> &#123;</span><br><span class="line">	<span class="type">int</span> i; <span class="type">float</span> x, fxi;</span><br><span class="line">	<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pxs-&gt;MAXNUM; i++) &#123;</span><br><span class="line">		<span class="comment">/*在这里指定f(x)的具体形式*/</span></span><br><span class="line">		x = pxs-&gt;element[i];</span><br><span class="line">		fxi = <span class="number">4</span> / <span class="built_in">sqrt</span>(PI) * <span class="built_in">exp</span>(-<span class="built_in">pow</span>(x, <span class="number">2</span>)) * <span class="built_in">pow</span>(x, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> (pus-&gt;element[i] &lt; fxi) &#123;</span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">&quot;%f\n&quot;</span>, pxs-&gt;element[i]);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">	<span class="comment">/*数据规模*/</span></span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">&quot;Please type the numbers of the random numbers you want:\n&quot;</span>);</span><br><span class="line">	<span class="type">int</span> size; <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;size);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*生成标准化的x和u数列*/</span></span><br><span class="line">	Pintseq pis = Random(size, <span class="number">2</span>);</span><br><span class="line">	Pfloatseq pxs = unifying(pis);</span><br><span class="line">	pis = Random(pxs-&gt;MAXNUM, <span class="number">7</span>);</span><br><span class="line">	Pfloatseq pus = unifying(pis);</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*伸缩变换*/</span></span><br><span class="line">	moveandscale(pxs, <span class="number">0</span>, <span class="number">5</span>);</span><br><span class="line">	moveandscale(pus, <span class="number">0</span>, <span class="number">4</span> / <span class="built_in">sqrt</span>(PI) * <span class="built_in">exp</span>(<span class="number">-1</span>));</span><br><span class="line"></span><br><span class="line">	<span class="comment">/*acceptance-rejection*/</span></span><br><span class="line">	acceptance_rejection(pxs, pus);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<div style="width:40%;margin:auto"></div><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style: none; padding-left: 0; margin-left: 40px"><li id="fn:1"><span style="display: inline-block; vertical-align: top; padding-right: 10px; margin-left: -40px">1.</span><span style="display: inline-block; vertical-align: top; margin-left: 10px;"><a target="_blank" rel="noopener" href="https://books.google.com.hk/books?id=JhL2FiF3hO4C">Cowan, G. Statistical Data Analysis. Clarendon Press, 1998.</a><a href="#fnref:1" rev="footnote"> ↩</a></span></li></ol></div></div>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://williamwyl.cn/2023/01/22/%E6%96%B0%E5%B9%B4%E7%A5%9D%E8%B4%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Wang Yilin">
      <meta itemprop="description" content="生活可以随心所欲，但不能随波逐流">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="WYL's Homepage">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2023/01/22/%E6%96%B0%E5%B9%B4%E7%A5%9D%E8%B4%BA/" class="post-title-link" itemprop="url">新春祝贺</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-01-22 00:00:00" itemprop="dateCreated datePublished" datetime="2023-01-22T00:00:00+08:00">2023-01-22</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-01-26 17:26:34" itemprop="dateModified" datetime="2023-01-26T17:26:34+08:00">2023-01-26</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%9D%82%E8%B0%88/" itemprop="url" rel="index"><span itemprop="name">杂谈</span></a>
                </span>
            </span>

          
            <span id="/2023/01/22/%E6%96%B0%E5%B9%B4%E7%A5%9D%E8%B4%BA/" class="post-meta-item leancloud_visitors" data-flag-title="新春祝贺" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>115</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>1 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p>值此新春佳节，祝福大家新年快乐，新的一年身体健康、万事顺意！</p>
<p><a href="https://williamwyl.cn/html/Firework/index.html">点击这里观看cyber烟花🎇</a> </p>
<p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1SD4y1J7uY/?spm_id_from=333.1007.tianma.1-1-1.click&vd_source=7419d8687d8a7a9b7ac70a1b973a5be9">点击这里领取红包🧧</a> </p>
<center>
笙歌间错华筵启。<br>
喜新春新岁。<br>
菜传纤手青丝细。<br>
和气入、东风里。<br>
幡儿胜儿都姑媂。<br>
戴得更忔戏。<br>
愿新春已后，<br>
吉吉利利。<br>
百事都如意。
</center>

<div align="right">——［宋］赵长卿《探春令》</div>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Wang Yilin"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Wang Yilin</p>
  <div class="site-description" itemprop="description">生活可以随心所欲，但不能随波逐流</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">14</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/WYL-PKU" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;WYL-PKU" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:3210225896@qq.com" title="E-Mail → mailto:3210225896@qq.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/William27181918" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;William27181918" rel="noopener" target="_blank"><i class="fab fa-twitter fa-fw"></i></a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://lhrg.github.io/" title="https:&#x2F;&#x2F;lhrg.github.io&#x2F;" rel="noopener" target="_blank">Haorun Li</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Wang Yilin</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">16k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">站点阅读时长 &asymp;</span>
    <span title="站点阅读时长">55 分钟</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.5' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  











<script>
document.querySelectorAll('.pdfobject-container').forEach(element => {
  let url = element.dataset.target;
  let pdfOpenParams = {
    navpanes : 0,
    toolbar  : 0,
    statusbar: 0,
    pagemode : 'thumbs',
    view     : 'FitH'
  };
  let pdfOpenFragment = '#' + Object.entries(pdfOpenParams).map(([key, value]) => `${key}=${encodeURIComponent(value)}`).join('&');
  let fullURL = `/lib/pdf/web/viewer.html?file=${encodeURIComponent(url)}${pdfOpenFragment}`;

  if (NexT.utils.supportsPDFs()) {
    element.innerHTML = `<embed class="pdfobject" src="${url + pdfOpenFragment}" type="application/pdf" style="height: ${element.dataset.height};">`;
  } else {
    element.innerHTML = `<iframe src="${fullURL}" style="height: ${element.dataset.height};" frameborder="0"></iframe>`;
  }
});
</script>




  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nickname,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : true,
      appId      : '1X6n70UTcE50boOVL79BDD21-MdYXbMMI',
      appKey     : '82jRPU3YMDqt3bhXYagqt63i',
      placeholder: "Just go go ^_^",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : 'https://williamwyl.cn'
    });
  }, window.Valine);
});
</script>

</body>
</html>
